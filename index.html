<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
            function computerPlay() {
                //Generate random number between 0 and 2
                let randomNumber = Math.floor(Math.random() * 3);

                //If 0, then Rock
                if (randomNumber == 0) {
                    return "Rock";
                }

                //If 1, then Paper
                else if (randomNumber == 1) {
                    return "Paper";
                }

                //If 2, then Scissors
                else {
                    return "Scissors";
                }
            }

            function playRound (playerSelection, computerSelection) {
                //Fixes case-insensitive playerSelection prior to comparison with computerSelection
                playerSelection = playerSelection.slice(0,1).toUpperCase() + playerSelection.slice(1).toLowerCase();
                
                //Draw - Player and computer made the same choice
                if (playerSelection == computerSelection) {
                    console.log("It's a draw!");
                    return "draw";
                }

                //Player Wins - Rock > Scissors, Paper > Rock, Scissors > Paper
                else if ((playerSelection == "Rock" && computerSelection == "Scissors") || (playerSelection == "Paper" && computerSelection == "Rock") || (playerSelection == "Scissors" && computerSelection == "Paper")) {
                    console.log(`You win! ${playerSelection} beats ${computerSelection}`);
                    return "win";
                }

                //Player Loses - Rock < Paper, Paper < Scissors, Scissors < Rock
                else if ((playerSelection == "Rock" && computerSelection == "Paper") || (playerSelection == "Paper" && computerSelection == "Scissors") || (playerSelection == "Scissors" && computerSelection == "Rock")) {
                    console.log(`You lose! ${computerSelection} beats ${playerSelection}`);
                    return "lose";
                }

                //Player entered invalid input
                else {
                    console.log("You broke the rules!")
                    return "invalid";
                }
            }

            function game() {
                let playerScore = 0;
                let computerScore = 0;

                for (let i = 0; i < 5; i++) {
                    let computerSelection = computerPlay();
                    let playerSelection = prompt("Rock, Paper or Scissors?");

                    let result = playRound(playerSelection, computerSelection);

                    if (result == "win") {
                        playerScore += 1;
                    }

                    else if (result == "lose") {
                        computerScore += 1;
                    }
                }

                if (playerScore > computerScore) {
                    console.log(`You win! Final score: ${playerScore}-${computerScore}`);
                }

                else if (computerScore > playerScore) {
                    console.log(`You lose! Final score: ${playerScore}-${computerScore}`);
                }

                else {
                    console.log(`It's a draw! Final score: ${playerScore}-${computerScore}`);
                }
            }

            game();
        </script>
    </body>
</html>